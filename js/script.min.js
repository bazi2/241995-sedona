var search=document.querySelector(".search-button"),popup=document.querySelector(".search-wrapper"),dateArrival=popup.querySelector("[name=date-arrival]"),form=popup.querySelector("form"),dateDeparture=popup.querySelector("[name=date-departure]"),adults=popup.querySelector("[name=adults]"),children=popup.querySelector("[name=children]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("dateArrival")}catch(e){isStorageSupport=!1}search.addEventListener("click",function(e){e.preventDefault(),console.log("Клик по кнопке поиска"),popup.classList.toggle("search-wrapper-show"),popup.classList.remove("search-wrapper-error"),storage?(dateArrival.value=storage,dateDeparture.focus()):dateArrival.focus()}),form.addEventListener("submit",function(e){dateArrival.value&&dateDeparture.value&&adults.value&&children.value?isStorageSupport&&localStorage.setItem("dateArrival",dateArrival.value):(e.preventDefault(),console.log("Нужно заполнить все поля: даты въезда и выезда, количество взрослых и детей"),popup.classList.add("search-wrapper-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("search-wrapper-show")&&(e.preventDefault(),popup.classList.remove("search-wrapper-show"),popup.classList.remove("search-wrapper-error"))});